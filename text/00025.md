## Установка Ruby

### Введение

Теперь, когда вы установили ОС и редактор кода, пришло время установить язык программирования. Это раздел, где вы вероятно столкнетесь с множеством ошибок.

Прежде чем продолжить, давайте рассмотрим несколько моментов:

- Копируйте и вставляйте команды, чтобы избежать опечаток;
- Следуйте инструкциям внимательно и не пропускайте разделы;
- **НЕ ИСПОЛЬЗУЙТЕ `sudo`, если в Vectree четко не указано об этом.** Несоблюдение данного требования может вызвать обилие головной боли. В некоторых случаях вы можете получить сообщение в терминале о том, что необходимо использовать sudo и установить что-то с помощью `apt`. Игнорируем данные сообщения и следуем только _нашим_ инструкциям.

Начнем!

<details>
<summary>Linux / WSL</summary>

### Шаг 1: Установка обновлений, пакетов и библиотек

Прежде чем мы сможем установить Ruby, нам нужно установить несколько стандартных пакетов.

#### Шаг 1.1: Откройте Терминал

Мы будем использовать терминал для установки всех программ.

Если у вас Ubuntu или Xubuntu, просто нажмите `Ctrl + Alt + T`, чтобы открыть терминал. (Это может касаться и других дистрибутивов Linux. Пробуйте!)

Если вы используете WSL, откройте программу "Ubuntu 18.04" в меню "Пуск".

**Быстрый совет:** В Linux вы можете копировать с терминала с помощью `Ctrl + Shift + C` и вставлять с помощью `Ctrl + Shift + V`. В WSL вы можете использовать `Ctrl + C` для копирования и щелкнуть правой кнопкой мыши, чтобы вставить содержимое буфера обмена в терминал. Это касается и bash, и PowerShell, и командная строка.

#### Шаг 1.2: Обновите Linux

Остальные команды установки будут выполнены внутри окна терминала.

Во-первых, мы должны убедиться, что ваш дистрибутив Linux обновлен. Запустите эти команды друг за другом. Т.к. эти команды используют `sudo`, вам нужно будет ввести свой пароль для их запуска. При вводе пароля вы можете не увидеть визуального подтверждения ввода, но будьте уверены, что ваш пароль вводится. Как только вы закончите вводить пароль, нажмите `enter`.

```bash
sudo apt update
sudo apt upgrade
```

Когда появится вопрос, нажмите `y` (или `Д`), а затем `enter`.

#### Шаг 1.3: Установка пакетов и библиотек

Далее нужно установить необходимые нам пакеты, которые не являются стандартными. Скопируйте и вставьте эту команду:

```bash
sudo apt install curl git nodejs gcc make libssl-dev libreadline-dev zlib1g-dev libsqlite3-dev
```

Когда появится запрос, нажмите `y` (или `Д`), а затем `enter`. Может появиться запрос пароля после нажатия `enter`, а может и нет.

### Шаг 2: Установка Ruby

Вы готовы установить Ruby! Мы собираемся использовать инструмент под названием `rbenv`, который упрощает установку и управление версиями Ruby.

#### Шаг 2.1: Установите rbenv

Во-первых, вам нужно склонировать репозиторий rbenv с помощью `git` - системы контроля версий, которая была установлена командой выше. Позже мы разберемся с данной программой.

```bash
git clone https://github.com/rbenv/rbenv.git ~/.rbenv
```

Далее мы выполним несколько команд, чтобы rbenv работал корректно. Воспользуемся командой Linux `echo`, чтобы упростить процесс.

Примечание: выполните эти команды последовательно друг за другом. Они ничего не выведут, если все сделано верно. Опять же, обязательно скопируйте и вставьте эти команды:

```bash
echo 'export PATH="$HOME/.rbenv/bin:$PATH"' >> ~/.bashrc
echo 'eval "$(rbenv init -)"' >> ~/.bashrc
exit
```

После выполнения команды `exit` вам нужно будет снова открыть терминал (см. Шаг 1.1 выше).

Затем установим `ruby-build`, чтобы помочь скомпилировать бинарники (файлы в двоичном коде) Ruby. Запустите эти команды в терминале, чтобы создать папку для плагина ruby-build, а затем загрузите его в соответствующий каталог.

```bash
mkdir -p "$(rbenv root)"/plugins
git clone https://github.com/rbenv/ruby-build.git "$(rbenv root)"/plugins/ruby-build
```

Наконец, введите `rbenv -v` в терминале, чтобы убедиться в правильности установки `rbenv`. Вы должны получить вывод с номером версии, похожим на этот:

```bash
$ rbenv -v
rbenv 1.1.1-40-g483e7f9
```

Если у вас не получилось вывести версию, обратитесь за помощью в [наш основной чат](https://discord.gg/pcMBpZ).

#### Шаг 2.2: Установка Ruby

Пришло время установить Ruby с помощью `rbenv`!

Внутри терминала выполните эту команду:

```bash
rbenv install 2.6.3 --verbose
```

Выполнение этой команды займет 10-15 минут. Флаг `--verbose` покажет вам на каком этапе установка, поэтому вы можете быть уверены, что процесс идет. Во время установки гляньте [данное видео](https://www.youtube.com/watch?v=GzkfOKkIteA) (видео на английском, но визуально можно все понять) или выпейте стакан воды.

Когда последняя команда будет выполнена, необходимо задать версию Ruby, которую мы будем использовать, и убедиться, что все работает:

```bash
rbenv global 2.6.3
```

Затем,

```bash
ruby -v
```

Данная команда должна вернуть что-то похожее на:

```bash
ruby 2.6.3pxx (20xx-xx-xx revision xxxxx) [x86_64-linux]
```

где x представляет последнюю версию Ruby, доступную на момент установки.

Отлично, мы сделали это! Самое сложное пройдено, пришло время перейти к следующему уроку!

</details>

<details>
<summary>MacOS</summary>

### Шаг 1: Установка обновлений, пакетов и библиотек

Прежде чем мы сможем установить Ruby, нам нужно установить несколько стандартных пакетов.

#### Шаг 1.1: Откройте Терминал

В папке "Программы" найдите "Терминал" и дважды щелкните. Или введите "Terminal" в Spotlight (`CMD + Space`), Launchpad.

Остальные команды установки будут выполнены внутри окна терминала.

#### Шаг 1.2: Установите Xcode

Во-первых, вам нужно установить Xcode, программу, предоставляемую Apple для программирования. Xcode установит программы, которые необходимы для Ruby и Git, а установка займет 10-15 минут.

Введите `xcode-select --install` в своем терминале и нажмите `enter`. Возможно придется нажать "Установить" в появившемся окне.

#### Шаг 1.3: Установите Homebrew

Следующая программа, которую вам нужно установить, — [Homebrew](https://brew.sh/). Она позволяет загружать другие необходимые программы (это что-то вроде Play Store или App Store только для терминала). Внутри терминала введите следующее:

```bash
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
```

Вам будет предложено ввести пароль. При вводе пароля вы можете не увидеть визуального подтверждения ввода, но будьте уверены, что ваш пароль вводится. Как только вы закончите вводить пароль, нажмите `enter`.

Поздравляем! Вы установили необходимые инструменты!

### Шаг 1. Установите Heroku.

Heroku - место размещения ваших Rails-приложений.

#### Шаг 2.1: Установка Heroku

Далее установите Heroku:

```bash
brew install heroku/brew/heroku
```

Эта команда установит интерфейс командной строки для Heroku, бесплатного веб-сервиса, на котором могут размещаться ваши приложения Ruby on Rails. Мы поговорим об этом позже.

### Шаг 3: Установка Ruby

Готовы установить Ruby? Мы собираемся использовать инструмент под названием `rbenv`, который упрощает установку и управление версиями Ruby.

#### Шаг 3.1: Установить rbenv

Чтобы установить `rbenv`, запустите в своем терминале следующее:

```bash
brew install rbenv
```

Затем выполните данную команду:

```bash
rbenv init
```

После выполнения команды вы должны увидеть следующее:

```bash
# Load rbenv automatically by appending
# the following to ~/.bash_profile:

eval "$(rbenv init -)"
```

Что ж сделаем то, что просят:

```bash
echo 'eval "$ (rbenv init -)"' >> ~ / .bash_profile
```

Вы заметите, что в терминале ничего не произошло. Это нормально для многих команд терминала. На этом этапе вам нужно будет перезапустить терминал, чтобы изменения вступили в силу. Нажмите на красную кнопку "х", а затем снова откройте терминал (см. Шаг 1.1).

#### Шаг 3.3: Установка Ruby

Пришло время установить Ruby! Мы рекомендуем поставить последнюю версию, которая в настоящее время 2.6.3:

```bash
rbenv install 2.6.3 --verbose
```

Выполнение этой команды займет 10-15 минут. Флаг `--verbose` покажет вам на каком этапе установка, поэтому вы можете быть уверены, что процесс идет. Во время установки гляньте [данное видео](https://www.youtube.com/watch?v=GzkfOKkIteA) (видео на английском, но визуально можно все понять) или выпейте стакан воды.

Когда последняя команда будет выполнена, необходимо задать версию Ruby, которую мы будем использовать, и убедиться, что все работает:

```bash
rbenv global 2.6.3
```

Затем,

```bash
ruby -v
```

Данная команда должна вернуть что-то похожее на:

```bash
ruby 2.6.3pxx (20xx-xx-xx revision xxxxx) [x86_64-linux]
```

где x представляет последнюю версию Ruby, доступную на момент установки.

Отлично, мы сделали это! Самое сложное пройдено, пришло время перейти к следующему уроку!
</details>
