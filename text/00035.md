# Чистый код

### Написание чистого кода

Разработчики тратят НАМНОГО больше времени на чтение кода, чем на его написание. Это верно даже с вашим собственным кодом. Чтобы вы и разработчики, которым понадобится использовать, поддерживать или развивать ваш код, не ломали голову, пожалуйста, научитесь писать читаемый код!

Рассмотрим следующие 2 фрагмента JavaScript:

1. Уродливый, трудночитаемый код (а-а-а, мои глаза):

~~~ Javascript
const x =
function(z) {
let w = 0;z.forEach(
function(q){
     w += q;
});return w;
};

x([2, 2, 2]);
~~~

2. Чистый и легко читаемый код:

~~~ Javascript
const sumArray = function(array) {
  let sum = 0;
  array.forEach(function(number) {
    sum += number;
  });
  return sum;
};

sumArray([2, 2, 2]);
~~~

Хотите верьте, хотите нет, обе эти функции выполняют одно и то же действие. И обе они представляют собой абсолютно корректный код, но очевидно, что второй гораздо проще читать и изучать. Представьте, что вы работаете над проектом с кем-то еще, и они написали первую функцию. Сколько времени вам понадобится, чтобы понять, что там происходит, чтобы вы могли выполнять свою работу? Представьте, что вы работаете над проектом самостоятельно, и написали первую функцию неделю или две назад... велика вероятность, что вы не будете точно помнить, что там делали, и потребуется время, чтобы понять ее.

Вторая, однако, гораздо проще для понимания. Даже если вы не знаете точно, что происходит во всем коде, переменные названы достаточно ясно, чтобы вы могли догадаться, а отступы расставлены однообразно, чтобы можно было легко анализировать различные части функции.

Есть много разных мнений на тему качественного кода на JavaScript. Самое главное, что вы пишите в едином стиле. Война между разработчиками, использующими табуляцию, и разработчиками, использующими пробелы для отступов, настолько укоренилась, что [это по сути уже шутка](https://www.youtube.com/watch?v=AXLoRpKnK8U). Но это не `важно`, если вы пишете в едином стиле.

### Простые правила

1. Отступ: `не имеет` значения, какой стиль отступа вы используете. Различные руководства по стилю JS рекомендуют разные варианты, и разницы не особо много. Важно только одно - это единый стиль. В наших примерах мы будем использовать 2 пробела для отступов.

2. Точки с запятой: точки с запятой _необязательны_ в JavaScript, ведь компилятор JS автоматически добавит их, если нужно. Но это МОЖЕТ привести к ошибкам, поэтому лучше привыкнуть к добавлению точек с запятой. Просто сделайте это!

3. Длина строки кода: Опять же, разные руководства по стилю задают разные ограничения, но почти ВСЕ предлагают ограничить длину каждой строки кода. Это правило не так строго, но ваш код будет легче читать, если вы разбиваете строки длиной более **80** символов. Многие редакторы кода показывают, когда вы перешли этот порог. При ручном разделении строк вы должны сделать **двойной** отступ для второй строки и попытаться разделить строки после оператора или запятой:

~~~ Javascript
  let reallyReallyLongLine = something + somethingElse + anotherThing +
      howManyTacos + oneMoreReallyLongThing;
~~~

4. Наименование: имена функций и переменных должны быть наглядными. Всегда используйте [camelCase](https://ru.wikipedia.org/wiki/CamelCase). Чтобы все было единообразно и легко читалось, переменные всегда должны начинаться с существительного, а функции - с глагола и самое главное на **английском**. Можно использовать отдельные символы в качестве имен переменных в контексте цикла или callback-функции (функции обратного вызова), но не в других местах.

~~~ Javascript
// Хорошо
const numberOfThings = 10;
const myName = "Тор";
const selected = true;

// Плохо (они начинаются с глаголов, могут быть перепутаны с функциями)
const getCount = 10;
const isSelected = true;

// Хорошо
function getCount () {
  return numberOfThings;
}

// Плохо (это существительное)
function myName () {
  return "Тор";
}
~~~

Прочитайте эти статьи, которые обсуждают несколько элементов написания хорошего чистого кода.

1. [Список советов по чистому коду](https://habr.com/ru/post/319472/).

2. [Роль комментариев в коде](https://tproger.ru/articles/comments-in-code/).

3. [Советы по стилю кода](https://learn.javascript.ru/coding-style).

4. <span class="btn-fill btn btn-xs btn-success">eng</span> [Список советов по чистому коду](https://onextrapixel.com/10-principles-for-keeping-your-programming-code-clean/).

5. <span class="btn-fill btn btn-xs btn-success">eng</span> [Статья](https://blog.codinghorror.com/coding-without-comments/) и [еще статья](https://blog.codinghorror.com/code-tells-you-how-comments-tell-you-why/) о роли комментариев в коде.

### Дополнительные ресурсы

* <span class="btn-fill btn btn-xs btn-success">eng</span> [Хорошая статья](https://www.martinfowler.com/bliki/CodeAsDocumentation.html),
* <span class="btn-fill btn btn-xs btn-success">eng</span> Полное руководство по [самодокументированному коду](http://wiki.c2.com/?SelfDocumentingCode),
* <span class="btn-fill btn btn-xs btn-success">eng</span> [Руководство по стилю Airbnb](https://github.com/airbnb/javascript),
* <span class="btn-fill btn btn-xs btn-success">eng</span> [Цепные методы для написания предложений](http://javascriptissexy.com/beautiful-javascript-easily-create-chainable-cascading-methods-for-expressiveness/),
* [Чистый код. Создание, анализ и рефакторинг](https://www.ozon.ru/context/detail/id/5011068/),
* [Совершенный код от Стива Макконнелла](https://www.ozon.ru/context/detail/id/138437220/).
